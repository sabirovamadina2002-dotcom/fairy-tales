{% extends "base.html" %}
{% block content %}
<div class="stats-box">
    <p>‚úÖ <strong>{{ total }}</strong> —Å–∫–∞–∑–æ–∫</p>
    <p>üìñ –í—Å–µ —Ç–µ–∫—Å—Ç—ã –≤–∑—è—Ç—ã —Å —Å–∞–π—Ç–∞ <a href="https://www.ziyouz.uz" target="_blank">ziyouz.uz</a></p>
    <p>–≠—Ç–æ—Ç –∫–æ—Ä–ø—É—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω:</p>
    <ul>
        <li><strong>–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞–º</strong> ‚Äî –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ñ–æ–ª—å–∫–ª–æ—Ä–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏;</li>
        <li><strong>—É—á–∏—Ç–µ–ª—è–º</strong> ‚Äî –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –º–µ–∂–∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏;</li>
        <li><strong>–ª–∏–Ω–≥–≤–∏—Å—Ç–∞–º</strong> ‚Äî –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π;</li>
        <li><strong>–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è–º —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã—Ö –Ω–∞—É–∫</strong> ‚Äî –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.</li>
    </ul>
    <p>üîç –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞: –ø–æ <strong>–ª–µ–º–º–∞–º</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–¥—É–º–∞—Ç—å¬ª) –∏ <strong>–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º</strong> (PER, LOC).</p>
</div>

<form method="get" action="/search" class="search-form">
    <select name="mode" id="mode" onchange="toggleEntityType()">
        <option value="lemma">–ü–æ –ª–µ–º–º–µ</option>
        <option value="entity">–ü–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏</option>
    </select>

    <select name="ent_type" id="ent_type" style="display: none;">
        <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
        <option value="PER">–ü–µ—Ä—Å–æ–Ω–∞ (PER)</option>
        <option value="LOC">–ú–µ—Å—Ç–æ (LOC)</option>
        <!-- ORG —É–¥–∞–ª—ë–Ω -->
    </select>

    <input type="text" name="q" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥—É–º–∞—Ç—å, –ù–æ–¥–∏—Ä, –ë—É—Ö–∞—Ä–∞..." required>
    <button type="submit">–ù–∞–π—Ç–∏</button>
</form>

<ul>
{% for tid, tale in tales %}
    <li><a href="/tale/{{ tid }}">{{ tale.metadata.title }}</a></li>
{% endfor %}
</ul>

{% if pages > 1 %}
<nav class="pagination">
    {% for p in range(1, pages + 1) %}
        {% if p == page %}
            <strong>{{ p }}</strong>
        {% else %}
            <a href="?page={{ p }}">{{ p }}</a>
        {% endif %}
    {% endfor %}
</nav>
{% endif %}

<script>
function toggleEntityType() {
    const mode = document.getElementById('mode').value;
    const entSelect = document.getElementById('ent_type');
    entSelect.style.display = (mode === 'entity') ? 'inline' : 'none';
}
</script>
{% endblock %}